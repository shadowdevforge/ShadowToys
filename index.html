<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="ShadowToys: A collection of high-fidelity, self-contained HTML experiments.">
  <title>ShadowToys // Lab</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@500;700&family=Plus+Jakarta+Sans:wght@400;600;800&display=swap"
    rel="stylesheet">

  <style>
    /* --- SYSTEM: CATPPUCCIN MACCHIATO --- */
    :root {
      --base: #24273a;
      --mantle: #1e2030;
      --crust: #181926;
      --text: #cad3f5;
      --subtext: #a5adcb;
      --overlay: #939ab7;
      --surface0: #363a4f;
      --surface1: #494d64;
      --surface2: #5b6078;

      --mauve: #c6a0f6;
      --blue: #8aadf4;
      --red: #ed8796;
      --peach: #f5a97f;
      --green: #a6da95;
      --teal: #8bd5ca;
      --yellow: #eed49f;
      --lavender: #b7bdf8;

      --font-sans: 'Plus Jakarta Sans', sans-serif;
      --font-mono: 'JetBrains Mono', monospace;
      --ease: cubic-bezier(0.16, 1, 0.3, 1);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background-color: var(--base);
      color: var(--text);
      font-family: var(--font-sans);
      min-height: 100vh;
      overflow-x: hidden;
      /* Cyber Grid Background */
      background-image:
        radial-gradient(circle at 50% 0%, rgba(138, 173, 244, 0.05) 0%, transparent 50%),
        linear-gradient(var(--mantle) 1px, transparent 1px),
        linear-gradient(90deg, var(--mantle) 1px, transparent 1px);
      background-size: 100% 100%, 40px 40px, 40px 40px;
    }

    /* --- LAYOUT --- */
    .container {
      max-width: 1300px;
      margin: 0 auto;
      padding: 0 24px;
    }

    header {
      padding: 80px 0 60px;
      text-align: center;
      animation: fadeInDown 0.8s var(--ease);
    }

    h1 {
      font-size: clamp(3rem, 8vw, 5rem);
      font-weight: 800;
      letter-spacing: -3px;
      background: linear-gradient(135deg, var(--mauve) 0%, var(--blue) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 16px;
    }

    .tagline {
      color: var(--subtext);
      font-size: 1.1rem;
      max-width: 500px;
      margin: 0 auto;
      line-height: 1.6;
    }

    /* --- CONTROLS --- */
    .toolbar {
      position: sticky;
      top: 24px;
      z-index: 100;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
      margin-bottom: 60px;
    }

    .search-pill {
      background: rgba(30, 32, 48, 0.7);
      backdrop-filter: blur(16px);
      border: 1px solid var(--surface1);
      border-radius: 100px;
      padding: 6px 6px 6px 24px;
      display: flex;
      align-items: center;
      width: 100%;
      max-width: 500px;
      box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.5);
    }

    .search-pill input {
      background: transparent;
      border: none;
      color: var(--text);
      font-size: 1rem;
      padding: 10px 0;
      width: 100%;
      outline: none;
      font-family: var(--font-sans);
    }

    .filter-bar {
      display: flex;
      gap: 8px;
      background: var(--mantle);
      padding: 6px;
      border-radius: 100px;
      border: 1px solid var(--surface0);
    }

    .filter-btn {
      background: transparent;
      border: none;
      color: var(--subtext);
      padding: 8px 20px;
      border-radius: 100px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.85rem;
      transition: all 0.3s var(--ease);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .filter-btn:hover {
      color: var(--text);
    }

    .filter-btn.active {
      background: var(--surface1);
      color: var(--mauve);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .count-tag {
      font-family: var(--font-mono);
      font-size: 0.7rem;
      background: var(--base);
      padding: 2px 6px;
      border-radius: 4px;
      opacity: 0.7;
    }

    /* --- GRID --- */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 24px;
      margin-bottom: 100px;
    }

    /* --- CARD --- */
    .card {
      background: var(--mantle);
      border: 1px solid var(--surface0);
      border-radius: 24px;
      padding: 32px;
      text-decoration: none;
      position: relative;
      display: flex;
      flex-direction: column;
      height: 280px;
      overflow: hidden;
      transition: all 0.4s var(--ease);
    }

    .card:hover {
      transform: translateY(-10px);
      border-color: var(--card-color);
      box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.6);
      background: #1e2030;
      /* Lighter mantle */
    }

    .card::after {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top right, var(--card-color), transparent 60%);
      opacity: 0;
      transition: opacity 0.4s var(--ease);
      z-index: 0;
    }

    .card:hover::after {
      opacity: 0.08;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 16px;
      z-index: 1;
    }

    .card-title {
      font-size: 1.5rem;
      font-weight: 800;
      color: var(--text);
      letter-spacing: -0.5px;
    }

    .card-badge {
      font-family: var(--font-mono);
      font-size: 0.65rem;
      font-weight: 700;
      text-transform: uppercase;
      padding: 4px 10px;
      border-radius: 20px;
      background: var(--surface0);
      color: var(--card-color);
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .card-desc {
      color: var(--subtext);
      font-size: 0.95rem;
      line-height: 1.6;
      flex: 1;
      z-index: 1;
    }

    .card-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 24px;
      z-index: 1;
    }

    .card-path {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      color: var(--overlay);
    }

    .card-btn {
      color: var(--card-color);
      font-weight: 700;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* --- ANIMATIONS --- */
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes cardFade {
      from {
        opacity: 0;
        transform: translateY(30px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* --- FOOTER --- */
    footer {
      background: var(--crust);
      padding: 80px 0;
      text-align: center;
      border-top: 1px solid var(--surface0);
    }

    .footer-note {
      font-family: var(--font-mono);
      font-size: 0.7rem;
      color: var(--overlay);
      letter-spacing: 2px;
      margin-top: 30px;
      opacity: 0.5;
    }

    .warning-box {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      padding: 12px 24px;
      background: rgba(237, 135, 150, 0.05);
      border: 1px solid rgba(237, 135, 150, 0.2);
      color: var(--red);
      border-radius: 12px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    @media (max-width: 600px) {
      .grid {
        grid-template-columns: 1fr;
      }

      header {
        padding: 40px 0;
      }

      h1 {
        font-size: 2.5rem;
      }
    }
  </style>
</head>

<body>

  <div class="container">
    <header>
      <h1>ShadowToys</h1>
      <p class="tagline">High-fidelity, single-file HTML experiments. No builds. No bloat. Pure engineering.</p>
    </header>

    <div class="toolbar">
      <div class="search-pill">
        <input type="text" id="search" placeholder="Locate an artifact..." autocomplete="off">
        <span style="margin-right: 18px; opacity: 0.4;">⌘K</span>
      </div>

      <nav class="filter-bar" id="filters">
      </nav>
    </div>

    <main class="grid" id="app-grid"></main>
  </div>

  <footer>
    <div class="warning-box">
      <span>⚠️</span>
      <span>Experimental Zone: Features may vanish or transform without notice.</span>
    </div>
    <p class="footer-note">FORGED BY SHADOWDEV // 2025</p>
  </footer>

  <script>
    // --- REGISTRY ---
    const apps = [
      {name: "Ascend // 30", desc: "A rigid 30-day self-improvement protocol. Features habit tracking, daily journaling, and data persistence in a luxury interface.", path: "toys/Ascend.html", color: "var(--purple)", category: "Productivity"},
      {name: "Zenith // Flow", desc: "A personal Kanban board with drag-and-drop, tagging, and mobile-optimized horizontal scrolling.", path: "toys/Zenith.html", color: "var(--peach)", category: "Productivity"},
      {name: "ShadeNotes", desc: "A sleek, mobile-first Markdown editor built with Vue.js. All your notes, saved locally.", path: "toys/ShadeNotes.html", color: "var(--blue)", category: "Productivity"},
      {name: "PomoShade", desc: "A configurable, aesthetic Pomodoro timer with persistent settings, audio alerts, and notifications.", path: "toys/PomoShade.html", color: "var(--mauve)", category: "Productivity"},
      {name: "Markdown Blacksmith", desc: "A split-pane Markdown editor with Vim keybindings, PDF export, and drag-and-drop support.", path: "toys/MarkdownBlacksmith.html", color: "var(--lavender)", category: "Tool"},
      {name: "ForgeCalculate", desc: "A precise scientific calculator with complex math functions. Themed in Catppuccin Macchiato.", path: "toys/ForgeCalculate.html", color: "var(--blue)", category: "Tool"},
      {name: "ForgeCalculus", desc: "An engineering-grade REPL calculator. Features unit suffix parsing (k, M, G), numerical calculus, and history logging.", path: "toys/ForgeCalculus.html", color: "var(--peach)", category: "Tool"},
      {name: "CanvasForge", desc: "A fluid, vector-feel digital sketchbook with undo/redo, high-DPI support, and image export.", path: "toys/CanvasForge.html", color: "var(--pink)", category: "Utility"},
      {name: "ChromaForge", desc: "A comprehensive color engineering suite. Features HSL mixing, palette generation, WCAG contrast checking, and blindness simulation.", path: "toys/ChromaForge.html", color: "var(--lavender)", category: "Utility"},
      {name: "GourmetCompass Open", desc: "A free, local-first restaurant finder for India. Uses OpenStreetMap & PIN codes to locate spots.", path: "toys/GourmetCompass.html", color: "var(--teal)", category: "Utility"},
      {name: "Catppuccin Defense", desc: "A production-grade, infinite-wave Tower Defense engine. Features ECS architecture.", path: "toys/CatppuccinDefense.html", color: "var(--red)", category: "Game"},
      {name: "Eternal Bloom", desc: "A relaxing idle garden simulator. Grow lilies, control the weather, and unlock secrets.", path: "toys/EternalBloom.html", color: "var(--pink)", category: "Game"},
      {name: "SerpentSaga", desc: "A feature-rich Snake game with touch controls, power-ups, campaign modes, and skins.", path: "toys/SerpentSaga.html", color: "var(--green)", category: "Game"},
      {name: "TetraFlux", desc: "A high-fidelity block stacking game. Features procedural audio synthesis, particle physics, and mobile-optimized touch controls.", path: "toys/TetraFlux.html", color: "var(--mauve)", category: "Game"},
    ];

    // --- ENGINE ---
    const grid = document.getElementById('app-grid');
    const searchInput = document.getElementById('search');
    const filterContainer = document.getElementById('filters');
    let activeFilter = 'all';

    // 1. Initialize UI (Generate Buttons)
    function initFilters() {
      // Extract unique categories using a Set
      const categories = new Set(apps.map(app => app.category));
      // Convert to array, sort, and prepend 'all'
      const sortedCats = ['all', ...Array.from(categories).sort()];

      filterContainer.innerHTML = '';

      sortedCats.forEach(cat => {
        const btn = document.createElement('button');
        btn.className = `filter-btn ${cat === 'all' ? 'active' : ''}`;
        btn.dataset.filter = cat;

        // Capitalize for display
        const label = cat.charAt(0).toUpperCase() + cat.slice(1);

        btn.innerHTML = `${label} <span class="count-tag" id="count-${cat}">0</span>`;

        btn.addEventListener('click', () => {
          document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          activeFilter = cat;
          render();
        });

        filterContainer.appendChild(btn);
      });
    }

    // 2. Dynamic Counting
    function updateCounts(currentQuery = "") {
      // Initialize counts with 0
      const counts = {all: 0};
      const uniqueCats = new Set(apps.map(a => a.category));
      uniqueCats.forEach(c => counts[c] = 0);

      // Count matches based on current search
      apps.forEach(app => {
        const matchesSearch = app.name.toLowerCase().includes(currentQuery) || app.desc.toLowerCase().includes(currentQuery);

        if (matchesSearch) {
          counts.all++;
          counts[app.category]++;
        }
      });

      // Update DOM
      for (const [key, value] of Object.entries(counts)) {
        const el = document.getElementById(`count-${key}`);
        if (el) {
          el.innerText = value;
          // Visual polish: fade out zero-count badges if you want, currently keeping them visible
          el.style.opacity = value === 0 ? '0.3' : '0.7';
        }
      }
    }

    // 3. Render Grid
    function render() {
      grid.innerHTML = '';
      const query = searchInput.value.toLowerCase();

      // Filter Logic
      const filtered = apps.filter(app => {
        const matchesSearch = app.name.toLowerCase().includes(query) || app.desc.toLowerCase().includes(query);
        const matchesFilter = activeFilter === 'all' || app.category === activeFilter;
        return matchesSearch && matchesFilter;
      });

      // Update the badge numbers based on the search context
      updateCounts(query);

      if (filtered.length === 0) {
        grid.innerHTML = `<div class="empty" style="grid-column: 1/-1; text-align:center; padding: 40px; color: var(--overlay);">No artifacts found matching query.</div>`;
        return;
      }

      // Render Cards
      filtered.forEach((app, index) => {
        const card = document.createElement('a');
        card.className = 'card';
        card.href = app.path;
        card.target = "_blank";
        card.style.setProperty('--card-color', app.color);
        // Staggered animation
        card.style.animation = `cardFade 0.6s var(--ease) ${index * 0.05}s both`;

        card.innerHTML = `
          <div class="card-header">
            <h2 class="card-title">${app.name}</h2>
            <span class="card-badge">${app.category}</span>
          </div>
          <p class="card-desc">${app.desc}</p>
          <div class="card-footer">
            <span class="card-path">./${app.path.split('/').pop()}</span>
            <div class="card-btn">
              Explore <span>→</span>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });
    }

    // --- EVENTS ---
    searchInput.addEventListener('input', render);

    // Global Keybinds
    window.addEventListener('keydown', (e) => {
      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
        e.preventDefault();
        searchInput.focus();
      }
    });

    // Start
    initFilters();
    render();
  </script>

</body>

</html>
